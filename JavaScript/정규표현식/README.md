# 정규 표현식

- 정규 표현식(regular expression)은 문자의 패턴을 나타내는 객체다.
- 자바스크립트의 RegExp 클래스를 통해 정규 표현식을 표현 할 수 있다.
- String과 RegExp에는 정규표현식을 사용하여 패턴 매칭을 수행하는 메서드와 텍스트상에서 특정 텍스트를 찾아서 바꾸는 함수가 정의되어 있다.

## 문자 클래스

- \[] -> 안의 글자중 아무거에나 매치된다.
  - /[abc]/ -> a, b, c중 아무거나
- ^ -> 부정 문자
  - /[^abc]/ -> a, b, c를 제외한 모든 문자와 매치
- \- -> 문자의 범위를 지정
  - /[a-z]/ -> 라틴 알파벳 소문자와 매치

| 문자   | 의미                                                     |
| ------ | -------------------------------------------------------- |
| [...]  | 대괄호 사이에 있는 한 문자                               |
| [^...] | 대괄호 사이에 없는 한 문자                               |
| .      | 줄바꿈 문자나 유니코드 라인 종료 문자를 제외한 모든 문자 |
| \w     | ASCII 워드 문자, [a-zA-Z0-9_]와 동일                     |
| \W     | ASCII 워드 문자가 아닌 모든 문자, [^a-za-z0-9_]와 동일   |
| \s     | 모든 유니코드 공백 문자                                  |
| \S     | 유니코드 공백 문자가 아닌 모든 문자, \w와 \S는 같지 않음 |
| d      | 모든 ASCII 숫자, [0-9]와 동일                            |
| \D     | ASCII 숫자가 아닌 모든 문자, [^0-9]와 동일               |
| [\b]   | 백스페이스 리터럴                                        |

### 반복

- 반복을 지정하는 문자는 언제나 반복을 지정하는 패턴 뒤에 나온다.

```javascript
// 예시
const reg = /\d{2,4}/; // 2 ~ 4자리의 숫자와 매치
const reg = /\w{3}\d?/; // 정확히 3개의 문자와 생략 가능한 숫자와 매치
const reg = /\s+java\s+/; // java와 앞뒤로 하나 이상의 공백 문자를 포함한 문자열과 매치
const reg = /[^(]*/; // 시작 괄호가 아닌 0개 이상의 문자와 매치
```

| 문자  | 의미                                                                                 |
| ----- | ------------------------------------------------------------------------------------ |
| {n,m} | 앞의 항목이 적어도 n번 이상, m번 이하로 나타남                                       |
| {n,}  | 앞의 항목이 n번 이상 나타남                                                          |
| {n}   | 앞의 항목이 정확하게 n번 나타남                                                      |
| ?     | 앞의 항목이 0 또는 한 번 나타남. 즉, 앞의 항목이 나오지 않을 수도 있다. {0,1}과 동일 |
| +     | 앞의 항목이 한번 이상 나타남. {1,}과 동일                                            |
| \*    | 앞의 항목이 0번 또는 그 이상 나타남. {0,}과 동일                                     |

### 매치 위치 지정

- ^ -> 시작 부분에 고정
- $ -> 마지막 부분에 고정

| 문자  | 의미                                                                                   |
| ----- | -------------------------------------------------------------------------------------- |
| ^     | 문자열의 시작 부분, 정규식이 여러 줄을 대상으로 하는 경우 한 줄의 시작과 일치          |
| $     | 문자열의 끝을 나타냄, 여러 줄일 경우 한 줄의 마지막을 나타냄                           |
| \b    | 단어 경계를 나타냄. 즉, \w와 \W 문자 사이, 혹은 \w 문자와 문자열의 시작 또는 끝과 일치 |
| \B    | 단어 경계가 아닌 곳의 위치                                                             |
| (?=p) | 전방 탐색 선언. '(?=' 다음에 나오는 문자들은 패턴 p와 매치되어야 함                    |
| (?!p) | 부정형 전방 탐색 선언 '(?!' 다음에 나오는 문자들은 패턴 p와 매치되지 않아야 함         |

### 플래그

| 문자 | 의미                                                                                     |
| ---- | ---------------------------------------------------------------------------------------- |
| i    | 대소문자를 구별하지 않는 매칭을 수행                                                     |
| g    | 전역 매칭을 수행. 즉, 처음 매치에서 끝내지 않고 모든 매치를 찾음                         |
| m    | 여러 줄 모드. ^은 줄의 시작이나 문자열의 시작과 일치, $는 줄의 끝이나 문자열의 끝과 일치 |

### 정규식에서 쓰이는 메소드

| 메소드  | 의미                                                                                                                 |
| ------- | -------------------------------------------------------------------------------------------------------------------- |
| exec    | 대응되는 문자열을 찾는 RegExp 메소드이다. 정보를 가지고 있는 배열을 반환하고, 못 찾았다면 null을 반환한다.           |
| test    | 대응되는 문자열이 있는지 검사하는 RegExp 메소드이다. true 나 false를 반환한다.                                       |
| match   | 대응되는 문자열을 찾는 String 메소드이다. 정보를 가지고 있는 배열을 반환하고, 못 찾았다면 null을 반환한다.           |
| search  | 대응되는 문자열이 있는지 검사하는 String 메소드이다. 대응된 부분의 인덱스를 반환하고, 그렇지 못했다면 -1을 반환한다. |
| replace | 대응되는 문자열을 찾아 다른 문자열로 치환하는 String 메소드이다.                                                     |
| split   | 정규식 혹은 문자열로 대상 문자열을 나누어 배열로 반환하는 String 메소드이다.                                         |

```javascript
const s = "babo123babo";
const reg = /babo/g;

//RegExp 메소드 -> 정규표현식.메소드
// String 메소드 -> 문자열.메소드

reg.exec(s); // ['babo', index: 0, input: 'babo123babo', groups: undefined]
reg.test(s); // true
s.match(reg); // ['babo', 'babo']
s.search(reg); // 0
s.replace(reg, "junseo"); // 'junseo123junseo'
s.split(reg); // ['', '123', '']
s.split(reg).join("junseo"); // 'junseo123junseo'
```

## 관련 문제

https://programmers.co.kr/learn/courses/30/lessons/72410?language=javascript

1.  new_id의 모든 대문자를 대응되는 소문자로 치환합니다.

    - new_id.toLowerCase(); <br />

2.  new*id에서 알파벳 소문자, 숫자, 빼기(-), 밑줄(*), 마침표(.)를 제외한 모든 문자를 제거합니다.
    - new_id.replace(/[^a-za-z0-9-*.]/g, ''); <br />
3.  new_id에서 마침표(.)가 2번 이상 연속된 부분을 하나의 마침표(.)로 치환합니다.
    - new_id.replace(/\.{2,}/g, '.');
4.  new_id에서 마침표(.)가 처음이나 끝에 위치한다면 제거합니다.
    - new_id.replace(/^\.|\.$/, '');
5.  new_id가 빈 문자열이라면, new_id에 "a"를 대입합니다.
    - new_id.replace(/^$/, 'a');
6.  new_id의 길이가 16자 이상이면, new_id의 첫 15개의 문자를 제외한 나머지 문자들을 모두 제거합니다. 만약 제거 후 마침표(.)가 new_id의 끝에 위치한다면 끝에 위치한 마침표(.) 문자를 제거합니다.
    - new_id.slice(0, 15).replace(/\.$/, '');
7.  new_id의 길이가 2자 이하라면, new_id의 마지막 문자를 new_id의 길이가 3이 될 때까지 반복해서 끝에 붙입니다.
    - new_id += new_id.charAt(new_id.length - 1).repeat(3 - new_id.length);

```javascript
function solution(new_id) {
  var answer = "";
  answer = new_id
    .toLowerCase()
    .replace(/[^a-z0-9-_.]/g, "")
    .replace(/\.{2,}/g, ".")
    .replace(/^\.|\.$/, "")
    .replace(/^$/, "a")
    .slice(0, 15)
    .replace(/\.$/, "");
  const len = answer.length;
  len > 2 ? answer : (answer = answer + answer.charAt(len - 1).repeat(3 - len));
  return answer;
}
```

## 관련 문제

> https://programmers.co.kr/learn/courses/30/lessons/81301

```javascript
function solution(s) {
  var answer = 0;
  const num = [
    { 0: "zero" },
    { 1: "one" },
    { 2: "two" },
    { 3: "three" },
    { 4: "four" },
    { 5: "five" },
    { 6: "six" },
    { 7: "seven" },
    { 8: "eight" },
    { 9: "nine" },
  ];
  num.forEach((data, key) => {
    if (s.includes(num[key][key])) {
      const reg = new RegExp(num[key][key], "g");
      s = s.replace(reg, key);
    }
  });
  answer = parseInt(s);
  return answer;
}
```

- 변수를 정규 표현식에서 사용하기 위해서는 RegExp 정규 표현식 생성자를 사용해야 한다. 첫 번째 인자로는 변수를 담고, 두 번째 인자로는 플래그를 설정하면 된다.
